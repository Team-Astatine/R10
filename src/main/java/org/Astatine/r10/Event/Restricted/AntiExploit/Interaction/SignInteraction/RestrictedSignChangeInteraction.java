package org.Astatine.r10.Event.Restricted.AntiExploit.Interaction.SignInteraction;

import net.kyori.adventure.text.Component;
import org.bukkit.Material;
import org.bukkit.event.block.SignChangeEvent;
import org.Astatine.r10.Event.EventRegister;
import org.Astatine.r10.Util.Function.StringComponentExchanger;

import java.util.List;

public class RestrictedSignChangeInteraction extends StringComponentExchanger implements EventRegister {

    private final SignChangeEvent event;

    public RestrictedSignChangeInteraction(SignChangeEvent event) {
        this.event = event;

        init();
        execute();
    }

    @Override
    public void init() {}

    @Override
    public void execute() {
        int totalLength = 0;
        List<Component> lines = event.lines();

        for (Component lineComp : lines) {
            totalLength += componentExchanger(lineComp).length();

            if (totalLength < 45)
                return;

            this.event.getBlock().setType(Material.AIR);
        }
    }
}
